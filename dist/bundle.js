"use strict";var fs=require("fs"),path=require("path"),filePath=path.resolve(__dirname,"./testdir"),j=require("jscodeshift"),updateMap=Object.entries({pmserver:"@pms/pmserver","react-current-user":"@pms/react-current-user","react-pm-utils":"@pms/react-utils"});function fileDisplay(t){fs.readdir(t,function(e,r){e?console.warn(e):r.forEach(function(e){var s=path.join(t,e);fs.stat(s,function(e,r){e?console.warn("获取文件stats失败"):(e=r.isFile(),r=r.isDirectory(),e&&(console.log(666666666666),fs.readFile(s,"utf-8",function(e,r){var t=!1,r=j(r).find(j.ImportDeclaration).forEach(function(r){updateMap.some(function(e){return 0===r.value.source.value.indexOf(e[0])&&(r.value.source.value=e[1],t=!0)})}).toSource();t&&fs.writeFile(s,r,"utf8",function(e){if(e)throw e;console.log("success done")})})),r&&fileDisplay(s))})})})}fileDisplay(filePath);
